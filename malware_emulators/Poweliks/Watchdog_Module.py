# This module will create a watchdog process to monitor a process of your liking
# Time: 3 hours

import os
import sys
import time
from subprocess import Popen

try:

    os.system('pip install psutil')

except Exception as err:

    print
    err
    sys.exit(1)

import psutil


def checkIfProcessRunning(processName):
    '''
    Check if there is any running process that contains the given name processName.
    '''
    # Iterate over the all the running process
    for proc in psutil.process_iter():
        try:
            # Check if process name contains the given name string.
            if processName.lower() in proc.name().lower():
                return True
        except (psutil.NoSuchProcess, psutil.AccessDenied, psutil.ZombieProcess):
            pass
    return False


def on_deleted(event):
    '''
    Raise a flag if the event you monitored is stopped
    :param event: The event to catch
    :return: call the event handler
    '''
    if not checkIfProcessRunning(event):
        return Popen(["calc.exe"])
    else:
        return


def main():
    timer = 0
    while True:
        time.sleep(2)
        timer += 2
        on_deleted('calc.exe')
        if timer == 10:
            break
